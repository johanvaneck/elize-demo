{"version":3,"file":"js/286.b3f64f5e.js","mappings":"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","sources":["webpack://elize-demo/./src/components/VideoUploadButton.vue?8dbb","webpack://elize-demo/./src/components/VideoUploadButton.vue?017b","webpack://elize-demo/./src/components/VideoUploadButton.vue","webpack://elize-demo/./src/views/UploadTab.vue?45b5","webpack://elize-demo/./src/views/UploadTab.vue"],"sourcesContent":["import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ion_button = _resolveComponent(\"ion-button\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createVNode(_component_ion_button, { onClick: $options.onButtonClick }, {\n      default: _withCtx(() => [\n        _createTextVNode(\"Upload Video\")\n      ]),\n      _: 1\n    }, 8, [\"onClick\"]),\n    _createElementVNode(\"input\", {\n      id: \"video-input\",\n      style: {\"display\":\"none\"},\n      name: \"video-upload\",\n      type: \"file\",\n      onChange: _cache[0] || (_cache[0] = ($event: any) => ($options.onChange($event)))\n    }, null, 32)\n  ]))\n}","\nimport supabase from \"@/supabase\";\nimport { IonButton } from \"@ionic/vue\";\nimport { uuid } from \"@supabase/gotrue-js/dist/module/lib/helpers\";\n\nexport default {\n  components: {\n    IonButton,\n  },\n  data() {\n    return {};\n  },\n  methods: {\n    async onChange(event: any) {\n      const file = event.target?.files[0];\n      if (!file) {\n        console.log(\"No file provided or found.\");\n        return;\n      }\n\n      // Upload to Supabase\n      const bucketPath = `public/video-${uuid()}.mp4`;\n      const videoFile = event.target.files[0];\n      const { data: bucketData } = await supabase.storage\n        .from(\"videos\")\n        .upload(bucketPath, videoFile, {\n          cacheControl: \"3600\",\n          upsert: false,\n        });\n\n      if (bucketData) {\n        // Get parent data\n        const {\n          data: { session },\n        } = await supabase.auth.getSession();\n        const { data: parentData, error } = await supabase\n          .from(\"parent\")\n          .select()\n          .eq(\"email\", session?.user.email);\n\n        console.log(\"Parent data:\", parentData);\n        console.log(\"Parent error:\", error);\n\n        const parentId = parentData ? parentData[0].id : \"\";\n\n        // Get child data\n        const { data: childData } = await supabase\n          .from(\"child\")\n          .select()\n          .eq(\"parent_id\", parentId);\n\n        console.log(\"Child data:\", childData);\n\n        const childId = childData ? childData[0].id : \"\";\n\n        // Insert video data\n        const { data: videoData } = await supabase.from(\"video\").insert({\n          child_id: childId,\n          date_recorded: new Date(),\n          bucket_path: bucketPath,\n        });\n\n        console.log(\"Video data:\", videoData);\n      }\n    },\n    onButtonClick() {\n      const videoInput = document.getElementById(\"video-input\");\n      videoInput?.click();\n    },\n  },\n};\n","import { render } from \"./VideoUploadButton.vue?vue&type=template&id=4b602322&ts=true\"\nimport script from \"./VideoUploadButton.vue?vue&type=script&lang=ts\"\nexport * from \"./VideoUploadButton.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createTextVNode as _createTextVNode, unref as _unref, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nimport {\n  IonPage,\n  IonHeader,\n  IonToolbar,\n  IonTitle,\n  IonContent,\n} from \"@ionic/vue\";\nimport { defineComponent } from \"vue\";\nimport VideoUploadButton from \"@/components/VideoUploadButton.vue\";\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'UploadTab',\n  setup(__props) {\n\ndefineComponent({\n  components: {},\n});\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createBlock(_unref(IonPage), null, {\n    default: _withCtx(() => [\n      _createVNode(_unref(IonHeader), null, {\n        default: _withCtx(() => [\n          _createVNode(_unref(IonToolbar), null, {\n            default: _withCtx(() => [\n              _createVNode(_unref(IonTitle), null, {\n                default: _withCtx(() => [\n                  _createTextVNode(\"Upload\")\n                ]),\n                _: 1\n              })\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      }),\n      _createVNode(_unref(IonContent), {\n        class: \"ion-padding ion-text-center\",\n        fullscreen: true\n      }, {\n        default: _withCtx(() => [\n          _createVNode(VideoUploadButton)\n        ]),\n        _: 1\n      })\n    ]),\n    _: 1\n  }))\n}\n}\n\n})","import script from \"./UploadTab.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./UploadTab.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["render","_ctx","_cache","$props","$setup","$data","$options","_component_ion_button","_resolveComponent","_openBlock","_createElementBlock","_createVNode","onClick","onButtonClick","default","_withCtx","_createTextVNode","_","_createElementVNode","id","style","name","type","onChange","$event","components","IonButton","data","methods","async","event","_event$target","file","target","files","console","log","bucketPath","uuid","videoFile","bucketData","supabase","upload","cacheControl","upsert","session","parentData","error","select","eq","user","email","parentId","childData","childId","videoData","insert","child_id","date_recorded","Date","bucket_path","videoInput","document","getElementById","click","__exports__","_defineComponent","__name","setup","__props","defineComponent","_createBlock","_unref","IonPage","IonHeader","IonToolbar","IonTitle","IonContent","class","fullscreen","VideoUploadButton"],"sourceRoot":""}